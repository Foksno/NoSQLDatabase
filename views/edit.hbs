<h1 class="display-1 my-2">Edit/update page</h1>
<table class="table">
    <tr>
        <th scope="col">_id</th>
        <th scope="col">ubezpieczony</th>
        <th scope="col">benzyna</th>
        <th scope="col">uszkodzony</th>
        <th scope="col">napęd 4x4</th>
        <th scope="col"></th>
    </tr>
    {{#each docs}}
    {{#if this.is_edit_id}}    
    <tr>
        <form method="post">
        <td>{{this._id}}</td>
        <td>
            <select name="ubez" id="ubez">
                <option {{#equals this.ubezpieczony "eq" "TAK"}}selected{{/equals}} value="TAK">Tak</option>
                <option {{#equals this.ubezpieczony "eq" "NIE"}}selected{{/equals}} value="NIE">Nie</option>
                <option {{#equals this.ubezpieczony "eq" "BRAK"}}selected{{/equals}} value="BRAK">Brak Danych</option>
            </select>
        </td>
        <td>
            <select name="benz" id="benz">
                <option {{#equals this.benzyna "eq" "TAK"}}selected{{/equals}} value="TAK">Tak</option>
                <option {{#equals this.benzyna "eq" "NIE"}}selected{{/equals}} value="NIE">Nie</option>
                <option {{#equals this.benzyna "eq" "BRAK"}}selected{{/equals}} value="BRAK">Brak Danych</option>
            </select>
        </td>
        <td>
            <select name="uszk" id="uszk">
                <option {{#equals this.uszkodzony "eq" "TAK"}}selected{{/equals}} value="TAK">Tak</option>
                <option {{#equals this.uszkodzony "eq" "NIE"}}selected{{/equals}} value="NIE">Nie</option>
                <option {{#equals this.uszkodzony "eq" "BRAK"}}selected{{/equals}} value="BRAK">Brak Danych</option>
            </select>
        </td>
        <td>
            <select name="nape" id="nape">
                <option {{#equals this.naped "eq" "TAK"}}selected{{/equals}} value="TAK">Tak</option>
                <option {{#equals this.naped "eq" "NIE"}}selected{{/equals}} value="NIE">Nie</option>
                <option {{#equals this.naped "eq" "BRAK"}}selected{{/equals}} value="BRAK">Brak Danych</option>
            </select>
        </td>
        <td>
            <button type="submit" class="btn btn-success" onclick="handle_edit('{{_id}}')" name="_id" value="{{this._id}}" id="_id">Update</button>
            <button class="btn btn-danger" formaction="/edit">Cancel</button>
        </td>
    </form>
    </tr>
    {{else}}
    <tr>
        <form method="get">
            <td>{{this._id}}</td>
            <td>{{this.ubezpieczony}}</td>
            <td>{{this.benzyna}}</td>
            <td>{{this.uszkodzony}}</td>
            <td>{{this.naped}}</td>
            <td><button class="btn btn-dark" name="_id" value="{{this._id}}">Edit</button></td>
        </form>
    </tr>
    {{/if}}
    {{/each}}
</table>

<script>
    function handle_edit(id) {
        if (a = confirm(`Chcesz zmienić podany wiersz o id = ${id}?`)) {
            location.href = `edit`;
        }
        else{
            var test = document.getElementById("_id")
            test.value = ""
            test.name = ""
            location.href = `edit`;
        }
    }
</script>